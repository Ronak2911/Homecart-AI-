{% extends 'base/base.html' %}

{% block title %}
Customer Management
{% endblock title %}

{% block body %}

<div class="container-fluid customers">

    <h3 class="mb-4">Customer Management</h3>

    <div class="card shadow-sm border-0">
        <div class="card-body p-0">

            <table class="table table-hover table-striped mb-0 align-middle">

                <thead class="table-light">
                    <tr>
                        <th>Name</th>
                        <th>Whatsapp No</th>
                        <th>City</th>
                        <th>Lead Status</th>
                        <th>Inquiry Area</th>
                        <th>Budget Range</th>
                        <th>Property Type</th>
                        <th>Inquiry Status</th>
                    </tr>
                </thead>

                <tbody>

                    {% if customers %}
                        {% for customer in customers %}
                        <tr>

                            <!-- Customer Name -->
                            <td class="fw-semibold">
                                {{ customer.name }}
                            </td>

                            <!-- Whatsapp -->
                            <td>
                                {{ customer.whatsappnumber }}
                            </td>

                            <!-- City -->
                            <td>
                                {{ customer.city }}
                            </td>

                            <!-- Lead Status -->
                            <td>
                                <span class="badge
                                    {% if customer.leadstatus|lower == 'hot' %}
                                        bg-danger
                                    {% elif customer.leadstatus|lower == 'warm' %}
                                        bg-warning text-dark
                                    {% elif customer.leadstatus|lower == 'cold' %}
                                        bg-secondary
                                    {% else %}
                                        bg-dark
                                    {% endif %}
                                ">
                                    {{ customer.leadstatus }}
                                </span>
                            </td>

                            <!-- Inquiry Area -->
                            <td>
                                {% if customer.area %}
                                    {{ customer.area }}
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            </td>

                            <!-- Budget Range -->
                            <td>
                                {% if customer.budgetrange %}
                                    <span class="badge bg-success">
                                        {{ customer.budgetrange }}
                                    </span>
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            </td>

                            <!-- Property Type -->
                            <td>
                                {% if customer.propertytype %}
                                    {{ customer.propertytype }}
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            </td>

                            <!-- Inquiry Status -->
                            <td>
                                {% if customer.status == "No inquiries" %}
                                    <span class="text-muted">
                                        No inquiries
                                    </span>
                                {% else %}
                                    <span class="badge bg-info">
                                        {{ customer.status }}
                                    </span>
                                {% endif %}
                            </td>

                        </tr>
                        {% endfor %}
                    {% else %}

                        <tr>
                            <td colspan="8" class="text-center text-muted py-4">
                                No customers found
                            </td>
                        </tr>

                    {% endif %}

                </tbody>

            </table>

        </div>
    </div>

</div>

{% endblock body %}
